<!DOCTYPE html>
<html>

<head>

  <title>骯骯尬美怕</title>
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    html, body {
      // margin: 0;
      // padding: 0;
    }

    #gp_info {
      // border: red 1px solid;
    }

    #sfx_bubble {
      position: absolute;
      top: 0;
      left: 0;
      // border: red 1px solid;
      filter: drop-shadow(0px 2px 1px #000);
    }
  </style>

  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

</head>

<body>
  <h1>骯骯尬美怕 (OnonGamepad)</h1>
  <canvas id='sfx_bubble' width='640' height='360'></canvas>
  <div id='gp_info'></div>
</body>

<script src="./sfx/_sfx_list_.js"></script>
<script src="./base.js"></script>
<!-- <script src="./bubble.js"></script> -->

<script>
function gpPrint(e, index) {
  var gp = navigator.getGamepads()[index];
  var gp_length = gp.buttons.length;

  $("#gp_info").empty();
  gp_info.innerHTML = '[' + gp.index + '] ' + gp.id + '<br />';
  gp_info.innerHTML += 'Count: ' + gp_connectingcount + '<br />';

  for (var i = 0; i < gp_length; i++) {
    var is_button_pressed = gp.buttons[i].pressed;
    gp_info.innerHTML += i + ': ' + is_button_pressed + '<br />';
    if (is_button_pressed & !gp_pressed[i]) {
      ononSfx(is_button_pressed, i);
      // text bubble
      //createNewBubble(my_sfx[i]);
    }
    if (!is_button_pressed) {
      gp_pressed[i] = false;
    }
  }

  gp_connectingcount += 1;
}
</script>

</html>
